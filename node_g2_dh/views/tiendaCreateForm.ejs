<!DOCTYPE html>

<html>
    
    <%- include('partials/head', {title: 'Crear producto'}) %>

    <body>
    <br>
    <br>
    <%- include('./partials/header') %> 

    <!-- Formulario de creación de productos de la tienda de DogHouse -->
        <div class="container-fluid m-5">
            
            <div class="row m-2 justify-content-md-center">

                <div class="col-12">
                    <h2> Momento de crear un producto </h2>
                </div>

                <div class="col-12 m-4">
                <form action="/tienda/crear" method="POST" id="formularioProducto" enctype="multipart/form-data">
                    <div class="row">
                        <div class="col-12">
                            <label for="name" class="form-label"> Nombre del producto:</label>
                            <input type="text" id="name" name="nombre" class="form-input <%= locals.errors && errors.nombreUsuario ? 'is-invalid': null%>"
                            value="<%= locals.oldData ? oldData.nombre : null %>">
                            <%if (locals.errors && errors.nombre) {%>
                                <div class="text-danger">
                                    <%= errors.nombre.msg%>
                                </div>
                            <% } %>
                        </div>
                        <div class="col-12">
                            <label for="price" class="form-label"> Precio del producto:</label>
                            <input type="number" id="price" name="precio" class="form-input <%= locals.errors && errors.precio ? 'is-invalid': null%>"
                            value="<%= locals.oldData ? oldData.precio : null %>">
                            <%if (locals.errors && errors.precio) {%>
                                <div class="text-danger">
                                    <%= errors.precio.msg%>
                                </div>
                            <% } %>
                        </div>
                        <div class="col-12">
                            <label for="discount" class="form-label"> Descuento:</label>
                            <input type="number" id="discount" name="descuento" class="form-input <%= locals.errors && errors.descuento ? 'is-invalid': null%>"
                            value="<%= locals.oldData ? oldData.descuento : null %>">
                        </div>
                        <div class="col-12">
                            <label for="category" class="form-label">Categoría:</label>
                            <select name="categoria" id="categoriaID" class="form-input">
                                <option value="">Selecciona</option>
                                <% for (let categoria of categorias) { %>
                                    <option value="<%=categoria.id %>"><%=categoria.nombre %></option>
                                <% } %>
                            </select>
                        </div>
                        <div class="col-12">
                            <label for="imagenProducto" class="form-label"> Seleccionar imagen:</label>
                            <input type="file" name="imagenProducto" id="imagenProducto">
                            <%if (locals.errors && errors.imagenProducto) {%>
                                <div class="text-danger">
                                    <%= errors.imagenProducto.msg%>
                                </div>
                            <%} %>
                        </div>
                        <div class="col-12">
                            <label for="descripcion" class="form-label"> Descripción:</label>
                            <textarea name="descripcion" id="descripcion" class="form-input <%= locals.errors && errors.descripcion ? 'is-invalid': null%>"
                            value="<%= locals.oldData ? oldData.descripcion : null %>"></textarea>
                            <%if (locals.errors && errors.descripcion) {%>
                                <div class="text-danger">
                                    <%= errors.descripcion.msg%>
                                </div>
                            <% } %>
                        </div>
                        <div class="col-12">
                            <button type="submit" class="buy-now-button"> Guardar producto</button>
                        </div>
                    </div>
                </form>
            </div>

            </div>
        </div>   

    <!-- Footer -->
	<div>
    <%- include('./partials/footer') %>
    </div>
    
    <script src="/js/tiendaCreateForm.js"> </script>

    </body>

</html>